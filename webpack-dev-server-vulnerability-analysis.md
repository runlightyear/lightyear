# webpack-dev-server Security Vulnerability Analysis

## Overview

**CVE-2025-30360** - webpack-dev-server users' source code may be stolen when they access a malicious web site with non-Chromium based browser

- **Severity**: Moderate (CVSS 3.1: 5.4)
- **Affected Versions**: webpack-dev-server <= 5.2.0
- **Fixed Version**: webpack-dev-server >= 5.2.1
- **Current Version in Project**: 4.15.2 (via Docusaurus 3.8.1)

## Vulnerability Details

### Description
webpack-dev-server always allows IP address Origin headers, which enables websites served on IP addresses to connect via WebSocket. This vulnerability allows attackers to steal source code using Cross-site WebSocket hijacking techniques.

### Attack Vector
1. Attacker sets up a malicious website on an IP address
2. User with a non-Chromium browser visits the malicious site
3. The site connects to the victim's local webpack-dev-server via WebSocket
4. Source code is extracted through the hot reload mechanism

### Impact
- Source code exposure when accessing malicious sites
- Affects users with predictable ports and non-Chromium browsers
- Chrome 94+ users are protected due to non-HTTPS private access blocking

## Current Project Status

### Dependency Chain
```
lightyear
└── apps/docs
    └── @docusaurus/core@3.8.1
        └── webpack-dev-server@4.15.2 (vulnerable)
```

### Why Can't Dependabot Update?
- The project uses Docusaurus 3.8.1, which depends on webpack-dev-server 4.x
- webpack-dev-server 5.x requires webpack 5.x
- Docusaurus 3.x uses webpack 5.x but pins webpack-dev-server to 4.x for compatibility

## Mitigation Options

### 1. Upgrade to Docusaurus 4.x (When Available)
- Docusaurus 4.x is expected to support webpack-dev-server 5.x
- This is the cleanest long-term solution
- Monitor Docusaurus releases for v4 availability

### 2. Use pnpm Overrides (Temporary Fix)
Add to root `package.json`:
```json
{
  "pnpm": {
    "overrides": {
      "webpack-dev-server": "^5.2.1"
    }
  }
}
```
**Warning**: This may cause compatibility issues. Test thoroughly.

### 3. Security Best Practices (Immediate)
- Use Chrome/Chromium-based browsers for development
- Avoid accessing untrusted websites while running dev server
- Use unpredictable ports for dev server
- Consider using HTTPS for local development

### 4. Wait for Docusaurus Update
- Monitor Docusaurus GitHub for webpack-dev-server 5.x support
- The Docusaurus team is aware of webpack 5 compatibility needs
- A minor version update may include this fix

## Recommendations

### Short Term
1. Educate developers about the vulnerability
2. Use Chrome/Chromium browsers for development
3. Avoid accessing untrusted sites during development
4. Monitor Docusaurus releases for updates

### Long Term
1. Plan migration to Docusaurus 4.x when available
2. Consider contributing to Docusaurus if urgent
3. Implement security policies for development environments

## References

- [CVE-2025-30360](https://github.com/advisories/GHSA-9jgg-88mc-972h)
- [webpack-dev-server GitHub](https://github.com/webpack/webpack-dev-server)
- [Docusaurus Releases](https://docusaurus.io/blog)
- [Original Security Report](https://github.com/webpack/webpack-dev-server/security/advisories/GHSA-9jgg-88mc-972h)

## Timeline

- **2025-01-03**: Dependabot alert created
- **2025-01-03**: Analysis completed
- **Next Steps**: Monitor Docusaurus for updates supporting webpack-dev-server 5.x