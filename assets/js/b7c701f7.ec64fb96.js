"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[72960],{62757:(e,a,n)=>{n.d(a,{xA:()=>i,yg:()=>d});var t=n(67308);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function l(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?l(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function o(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},l=Object.keys(e);for(t=0;t<l.length;t++)n=l[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)n=l[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=t.createContext({}),p=function(e){var a=t.useContext(c),n=a;return e&&(n="function"==typeof e?e(a):s(s({},a),e)),n},i=function(e){var a=p(e.components);return t.createElement(c.Provider,{value:a},e.children)},g="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},y=t.forwardRef((function(e,a){var n=e.components,r=e.mdxType,l=e.originalType,c=e.parentName,i=o(e,["components","mdxType","originalType","parentName"]),g=p(n),y=r,d=g["".concat(c,".").concat(y)]||g[y]||u[y]||l;return n?t.createElement(d,s(s({ref:a},i),{},{components:n})):t.createElement(d,s({ref:a},i))}));function d(e,a){var n=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var l=n.length,s=new Array(l);s[0]=y;var o={};for(var c in a)hasOwnProperty.call(a,c)&&(o[c]=a[c]);o.originalType=e,o[g]="string"==typeof e?e:r,s[1]=o;for(var p=2;p<l;p++)s[p]=n[p];return t.createElement.apply(null,s)}return t.createElement.apply(null,n)}y.displayName="MDXCreateElement"},78460:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var t=n(42664),r=(n(67308),n(62757));const l={},s=void 0,o={unversionedId:"api/salesforce.salesforce",id:"api/salesforce.salesforce",title:"salesforce.salesforce",description:"Home &gt; @runlightyear/salesforce &gt; Salesforce",source:"@site/docs/api/salesforce.salesforce.md",sourceDirName:"api",slug:"/api/salesforce.salesforce",permalink:"/docs/api/salesforce.salesforce",draft:!1,tags:[],version:"current",frontMatter:{}},c={},p=[{value:"Salesforce class",id:"salesforce-class",level:2},{value:"Example 1",id:"example-1",level:2},{value:"Example 2",id:"example-2",level:2},{value:"Example 3",id:"example-3",level:2},{value:"Example 4",id:"example-4",level:2},{value:"Example 5",id:"example-5",level:2},{value:"Example 6",id:"example-6",level:2},{value:"Example 7",id:"example-7",level:2},{value:"Example 8",id:"example-8",level:2},{value:"Constructors",id:"constructors",level:2},{value:"Properties",id:"properties",level:2}],i={toc:p},g="wrapper";function u(e){let{components:a,...n}=e;return(0,r.yg)(g,(0,t.A)({},i,n,{components:a,mdxType:"MDXLayout"}),(0,r.yg)("p",null,(0,r.yg)("a",{parentName:"p",href:"/docs/api"},"Home")," ",">"," ",(0,r.yg)("a",{parentName:"p",href:"/docs/api/salesforce"},"@runlightyear/salesforce")," ",">"," ",(0,r.yg)("a",{parentName:"p",href:"/docs/api/salesforce.salesforce"},"Salesforce")),(0,r.yg)("h2",{id:"salesforce-class"},"Salesforce class"),(0,r.yg)("p",null,"Salesforce connector"),(0,r.yg)("b",null,"Signature:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},"declare class Salesforce extends RestConnector \n")),(0,r.yg)("p",null,"Extends: "),(0,r.yg)("p",null,(0,r.yg)("a",{parentName:"p",href:"/docs/api/lightyear.restconnector"},"RestConnector")),(0,r.yg)("h2",{id:"example-1"},"Example 1"),(0,r.yg)("p",null,"Install"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"npm install @runlightyear/salesforce\n")),(0,r.yg)("h2",{id:"example-2"},"Example 2"),(0,r.yg)("p",null,"Import"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},'import { Salesforce } from "@runlightyear/salesforce";\n')),(0,r.yg)("h2",{id:"example-3"},"Example 3"),(0,r.yg)("p",null,"Use in an action"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},'defineAction({\n  name: "salesforce-example",\n  title: "Salesforce Example",\n  apps: ["salesforce"],\n  run: async ({ auths }) => {\n    const salesforce = new Salesforce({\n      auth: auths.salesforce,\n      domain: "https://lightyear2-dev-ed.develop.my.salesforce.com",\n    });\n});\n')),(0,r.yg)("h2",{id:"example-4"},"Example 4"),(0,r.yg)("p",null,"Get a list of accounts"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},"const response = await salesforce.query({\n  q: `SELECT Name FROM Account`,\n});\n\nconst accounts = response.data.records;\n")),(0,r.yg)("h2",{id:"example-5"},"Example 5"),(0,r.yg)("p",null,"Page through a long list of accounts"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},'let response = await salesforce.query({ q: `SELECT Name from Account` });\n\nconsole.log("First batch of accounts", response.data.records);\n\nwhile (!response.data.done) {\n  response = await salesforce.query({\n    nextRecordsUrl: response.data.nextRecordsUrl,\n  });\n\n  console.log("Next batch of accounts", response.data.records);\n}\n')),(0,r.yg)("h2",{id:"example-6"},"Example 6"),(0,r.yg)("p",null,"Create an account"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},'const response = await salesforce.createRecord({\n  objectType: "Account",\n  fieldValues: { Name: "A New Account" },\n});\n\nconsole.log("Created new account", response.data.id);\n')),(0,r.yg)("h2",{id:"example-7"},"Example 7"),(0,r.yg)("p",null,"Get the list of field names on Contacts"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},'const response = await salesforce.describeObject({ objectType: "Contact" });\n\nconsole.log(\n  "fields:",\n  response.data.fields.map((field) => field.name)\n);\n')),(0,r.yg)("h2",{id:"example-8"},"Example 8"),(0,r.yg)("p",null,"Full example: Poll for new leads once a minute"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},'import { defineAction, setVariable } from "@runlightyear/lightyear";\nimport { Salesforce } from "@runlightyear/salesforce";\n\ndefineAction({\n  name: "get-new-leads",\n  title: "Get New Leads",\n  apps: ["salesforce"],\n  variables: ["lastCreatedDate"],\n  trigger: {\n    pollingFrequency: 1,\n  },\n  run: async ({ auths, variables }) => {\n    const salesforce = new Salesforce({\n      auth: auths.salesforce,\n      domain: "<your salesforce domain name>",\n    });\n\n    const response = await salesforce.query({\n      q: `SELECT Name, CreatedDate from Lead WHERE CreatedDate > ${\n        variables.lastCreatedDate || "YESTERDAY"\n      } ORDER BY CreatedDate`,\n    });\n\n    const newLeads = response.data.records;\n\n    if (newLeads.length > 0) {\n      console.log(\n        "New leads",\n        newLeads.map((lead) => lead.name)\n      );\n\n      await setVariable(\n        "lastCreatedDate",\n        String(newLeads[newLeads.length - 1].createdDate)\n      );\n    }\n  },\n});\n')),(0,r.yg)("h2",{id:"constructors"},"Constructors"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Constructor"),(0,r.yg)("th",{parentName:"tr",align:null},"Modifiers"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/api/salesforce.salesforce._constructor_"},"(constructor)(props)")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},"Constructs a new instance of the ",(0,r.yg)("code",null,"Salesforce")," class")))),(0,r.yg)("h2",{id:"properties"},"Properties"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Property"),(0,r.yg)("th",{parentName:"tr",align:null},"Modifiers"),(0,r.yg)("th",{parentName:"tr",align:null},"Type"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/api/salesforce.salesforce.authtype"},"authType")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("code",null,"static")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/api/lightyear.authtype"},"AuthType")),(0,r.yg)("td",{parentName:"tr",align:null})),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/api/salesforce.salesforce.domain"},"domain")),(0,r.yg)("td",{parentName:"tr",align:null}),(0,r.yg)("td",{parentName:"tr",align:null},"string"),(0,r.yg)("td",{parentName:"tr",align:null})),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"/docs/api/salesforce.salesforce.oauth"},"OAuth")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("code",null,"static")),(0,r.yg)("td",{parentName:"tr",align:null},"typeof ",(0,r.yg)("a",{parentName:"td",href:"/docs/api/salesforce.salesforceoauth"},"SalesforceOAuth")),(0,r.yg)("td",{parentName:"tr",align:null})))))}u.isMDXComponent=!0}}]);